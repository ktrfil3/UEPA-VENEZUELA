<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adventista Venezuela</title>
    <link rel="icon" href="/images/global/site-icon.png" />

    <link rel="stylesheet" href="/css/transition.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/globals.css" />
    <link rel="stylesheet" href="/css/menu.css" />
    <link rel="stylesheet" href="/css/home.css" />
    <link rel="stylesheet" href="/css/work.css" />
    <link rel="stylesheet" href="/css/project.css" />
    <link rel="stylesheet" href="/css/about.css" />
    <link rel="stylesheet" href="/css/contact.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <!-- page transition  -->
    <div class="transition">
      <div class="transition-overlay overlay-1"></div>
      <div class="transition-overlay overlay-2"></div>
      <div class="transition-overlay overlay-3"></div>
      <div class="transition-overlay overlay-4"></div>
      <div class="transition-overlay overlay-5"></div>
    </div>

    <div class="page project-page">
      <!-- nav -->
      <nav>
        <div class="logo">
          <div class="logo-container">
            <p class="mn"><a href="/">Adventista Venezuela</a></p>
          </div>
        </div>
        <div class="menu-toggle-btn">
          <div class="menu-toggle-btn-wrapper">
            <p class="mn open-label">Menu</p>
            <p class="mn close-label">Close</p>
          </div>
        </div>
      </nav>
      <div class="nav-overlay">
        <div class="nav-items">
          <div class="nav-item">
            <p><a href="/">Home</a></p>
          </div>
          <div class="nav-item active">
            <p><a href="/work">Nuestro Trabajo</a></p>
          </div>
          <div class="nav-item">
            <p><a href="/about">Sobre Nosotros</a></p>
          </div>
          <div class="nav-item">
            <p><a href="/project.html">Noticias</a></p>
          </div>
          <div class="nav-item">
            <p><a href="/contact">Contactanos</a></p>
          </div>
        </div>
        <div class="nav-footer">
          <div class="nav-footer-item">
            <div class="nav-footer-item-header">
              <p class="mn">Contactanos</p>
            </div>
            <div class="nav-footer-item-copy">
              <p class="mn"><a href="https://www.instagram.com/uepavenezuela?igsh=YjUxNTk0cW1wNDgy" target="_blank">Instagram</a></p>
              <p class="mn"><a href="https://www.facebook.com/share/14Mh2iis2tA/" target="_blank">Facebook</a></p>
            </div>
          </div>
          <div class="nav-footer-item">
            <div class="nav-footer-item-copy">
              <p class="mn">2025 * Create by Neuronix C.A</p>
            </div>
          </div>
          <div class="nav-footer-item">
            <div class="nav-footer-item-header">
              <p class="mn">Di Hola!</p>
            </div>
            <div class="nav-footer-item-copy">
              <p class="mn">
                <a href="mailto:uevzla@gmail.com" target="_blank"
                  >uevzla@gmail.com</a
                >
              </p>
            </div>
          </div>
        </div>
      </div>
      <!-- main content -->
<section class="card">
  <h2>Registro de Pagos</h2>
  <form id="pagoForm">
    <label for="datos"><p>Nombre del estudiante</p></label>
    <input type="text" id="datos" placeholder="Ej: José Pérez" required>
    
    <label for="seccion"><p>Sección del estudiante</p></label>
    <input type="text" id="seccion" placeholder="Ej: 3°B" required>
    
    <input type="text" id="motivo" placeholder="Motivo del pago (mensualidad, matrícula...)" required>
    
    <label for="comprobantes"><p>Adjuntar comprobantes de pago</p></label> 
    <input type="file" id="comprobantes" accept="image/*" multiple required>
    
    <button class="regis" type="submit">Registrar Pago</button>
    <br>
    <button id="abrirModalBtn" type="button">
       <p>Datos Bancarios</p>
    </button>

    <div id="modalDatosBancarios" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>Información de Pago</h3>
            <hr>
            <div class="bank-data">
                <strong>ASOCIACIÓN CIVIL
                  UNIDAD EDUCATIVA PRIVADA
                  ADVENTISTA VENEZUELA</strong>
                <p>*RIF/CÉDULA:* PD-00130705</p>

                <br>
                <strong>Transferencia en Bolívares</strong>
                <p>0191-0129-1121-0000-6938</p>
                
                <br>
                <strong>Transferencia en Divisas</strong>
                <p>0191-0129-1123-0000-4156</p>
                <p>Banco: BNC</p>
                
                <br>
                <strong>PAGO MÓVIL</strong>
                <p>Banco: 0191</p>
                <p>Rif/Cédula: J-30422760-4</p>
                <p>Teléfono: 0426-4961573</p>
            </div>
        </div>
    </div>
  </form>
  <p id="mensaje" class="mensaje"></p>
</section>
  <footer>
        <div class="footer-container">
          <div class="footer-symbols footer-symbols-1">
            <img src="/images/global/s6.png" alt="" />
            <img src="/images/global/s6.png" alt="" />
          </div>
          <div class="footer-symbols footer-symbols-2">
            <img src="/images/global/s6.png" alt="" />
            <img src="/images/global/s6.png" alt="" />
          </div>
          <div class="footer-header">
            <h1>Adventista Venezuela</h1>
          </div>
          <div class="footer-row">
            <div class="footer-col">
              <p><a href="/index.html">Home</a></p>
              <p><a href="/work">Nuestro Trabajo</a></p>
              <p><a href="/about">Sobre Nosotros</a></p>
              <p><a href="/contact">Contactanos</a></p>
            </div>
            <div class="footer-col">
              <p>Impulso</p>
              <p>
                <a href="https://www.youtube.com/@codegrid" target="_blank"
                  >Donaciones</a
                >
              </p>
            </div>
            <div class="footer-col">
              <p>Social Media</p>
              <p>
                <a href="https://www.facebook.com/share/14Mh2iis2tA/" target="_blank"
                  >Facebook</a
                >
              </p>
              <p>
                <a href="https://www.instagram.com/uepavenezuela/?igsh=YjUxNTk0cW1wNDgy" target="_blank"
                  >Instagram</a
                >
              </p>
            </div>
            <div class="footer-col">
              <p><a href="/inscripción.html">Inscripciones</a></p>
            </div>
          </div>
          <div class="copyright-info">
            <p class="mn">MWT - OCT 2025</p>
            <p class="mn">//</p>
            <p class="mn">
              created by
              <a href="https://neuronixve.vercel.app/?fbclid=PAZnRzaANshsBleHRuA2FlbQIxMQABpym1953BvGvavKDWSAB3BUxgE9Rq9KwEmudCxzn142awSvsbGgu2OBlWqo9W_aem_vjM7aeEOQdCt7ONc2Z-jiw" target="_blank"
                >Neuronix</a
              >
            </p>
          </div>
          <div class="explosion-container"></div>
        </div>
      </footer>
    </div>
 <script type="module" src="/js/transition.js"></script>
    <script type="module" src="/js/lenis-scroll.js"></script>
    <script type="module" src="/js/menu.js"></script>
    <script type="module" src="/js/hero.js"></script>
    <script type="module" src="/js/featured-work.js"></script>
    <script type="module" src="/js/services.js"></script>
    <script type="module" src="/js/work.js"></script>
    <script type="module" src="/js/project.js"></script>
    <script type="module" src="/js/about.js"></script>
    <script type="module" src="/js/contact.js"></script>
    <script type="module" src="/js/footer.js"></script>
    <script type="module" src="/js/news.js"></script>
    <script type="module" src="/js/newscole.js"></script>
  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbwrkUyxhRZLi29hq0rs-mGwEMygUn4zm-X0vHBL5upBwgsL6W7d3fB0uvQpogX92Da0JA/exec"; // tu endpoint

document.getElementById("pagoForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const datos = document.getElementById("datos").value;
  const seccion = document.getElementById("seccion").value; // Variable ya estaba aquí
  const motivo = document.getElementById("motivo").value;
  const files = document.getElementById("comprobantes").files;
  const mensaje = document.getElementById("mensaje");

  if (files.length === 0) return alert("Por favor, adjunte al menos un comprobante.");

  mensaje.textContent = "Enviando datos... por favor espere.";

  const filesData = [];
  for (let f of files) {
    const base64 = await toBase64(f);
    filesData.push({
      name: f.name,
      // Se mantiene la limpieza de la cabecera base64
      content: base64.replace(/^data:image\/(png|jpeg|jpg);base64,/, "") 
    });
  }

  // ¡IMPORTANTE! Se agregó 'seccion' al objeto payload
  const payload = { datos, seccion, motivo, files: filesData }; 

  try {
    const res = await fetch(scriptURL, {
      method: "POST",
      // Asegúrate de que tu Google Script esté configurado para manejar el JSON
      body: JSON.stringify(payload) 
    });

    const result = await res.json();
    if (result.success) {
      mensaje.textContent = "✅ Registro guardado exitosamente.";
      e.target.reset();
    } else {
      mensaje.textContent = "❌ Error al registrar. Intente nuevamente. (Respuesta del servidor: " + result.error + ")";
    }
  } catch (err) {
    mensaje.textContent = "❌ Error de conexión. Verifique su red y el endpoint.";
    console.error(err);
  }
});

function toBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = () => resolve(reader.result);
    reader.onerror = reject;
  });
}
  </script>
  <script>
        // Obtener la modal
        const modal = document.getElementById("modalDatosBancarios");
        
        // Obtener el botón que abre la modal
        const btn = document.getElementById("abrirModalBtn");
        
        // Obtener el elemento <span> que cierra la modal (la 'x')
        const span = document.getElementsByClassName("close-btn")[0];

        // Cuando el usuario hace clic en el botón, se abre la modal
        btn.onclick = function() {
            modal.style.display = "block";
        }

        // Cuando el usuario hace clic en <span> (x), se cierra la modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // Cuando el usuario hace clic fuera de la modal, se cierra
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
